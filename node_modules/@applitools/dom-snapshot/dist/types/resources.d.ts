import type { BlobsObj } from './blob';
export interface ResourceUrlsAndBlobs {
    resourceUrls: string[];
    blobsObj: BlobsObj;
}
export interface FetchUrlResult {
    url: string;
    value?: ArrayBuffer;
    type?: string;
    probablyCORS?: boolean;
    errorStatusCode?: number;
    isTimeout?: boolean;
}
export interface FetchUrlError extends Error {
    isTimeout: boolean;
}
export interface ProcessResourceResult {
    resourceUrls?: string[];
    blobsObj?: BlobsObj;
}
export interface FetchUrlOptions {
    fetch?: typeof window.fetch;
    AbortController?: typeof window.AbortController;
    timeout?: number;
    mediaDownloadTimeout?: number;
}
export interface ProcessResourceOptions {
    fetchUrl: (url: string) => Promise<FetchUrlResult>;
    findStyleSheetByUrl: (url: string, documents: Document[]) => CSSStyleSheet | null;
    getCorsFreeStyleSheet: (value: ArrayBuffer, styleSheet?: CSSStyleSheet | null) => {
        corsFreeStyleSheet: CSSStyleSheet;
        cleanStyleSheet: () => void;
    };
    extractResourcesFromStyleSheet: (styleSheet: CSSStyleSheet) => string[];
    extractResourcesFromSvg: (value: ArrayBuffer) => string[];
    sessionCache?: {
        getItem: (key: string) => string[];
        setItem: (key: string, value: string[]) => void;
        keys: () => string[];
        persist?: () => void;
    };
    cache?: {
        [url: string]: Promise<ProcessResourceResult>;
    };
    compress?: boolean;
    serialize?: boolean;
    log?: (message: string, ...args: any[]) => void;
}
export interface ProcessResourceParams {
    url: string;
    documents: Document[];
    getResourceUrlsAndBlobs: (params: {
        documents: Document[];
        urls: string[];
        forceCreateStyle?: boolean;
        skipResources?: string[];
    }) => Promise<{
        resourceUrls: string[];
        blobsObj: BlobsObj;
    }>;
    forceCreateStyle?: boolean;
    skipResources?: string[];
}
export interface GetResourceUrlsAndBlobsParams {
    documents: Document[];
    urls: string[];
    forceCreateStyle?: boolean;
    skipResources?: string[];
}
export interface GetResourceUrlsAndBlobsResult {
    resourceUrls: string[];
    blobsObj: BlobsObj;
}
export interface ProcessResourceFunction {
    (params: {
        url: string;
        documents: Document[];
        getResourceUrlsAndBlobs: GetResourceUrlsAndBlobsFunction;
        forceCreateStyle?: boolean;
        skipResources?: string[];
    }): Promise<ProcessResourceResult>;
}
export interface GetResourceUrlsAndBlobsFunction {
    (params: GetResourceUrlsAndBlobsParams): Promise<GetResourceUrlsAndBlobsResult>;
}
export interface AggregateFunction {
    (resourceUrlsAndBlobsArr: ProcessResourceResult[]): GetResourceUrlsAndBlobsResult;
}
export interface MakeGetResourceUrlsAndBlobsOptions {
    processResource: ProcessResourceFunction;
    aggregateResourceUrlsAndBlobs: AggregateFunction;
}
